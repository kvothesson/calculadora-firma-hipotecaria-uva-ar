function configurarSlidersGastos(){["escritura","inmobiliaria","firmas","sellos"].forEach((e,t)=>{setTimeout(()=>{const t=document.getElementById(e+"Slider");if(t){let o;t.addEventListener("input",function(){const t=parseFloat(this.value)||0;t<0&&(this.value=0),t>10&&(this.value=10),this.classList.add("updating"),clearTimeout(o),o=setTimeout(()=>{const t=()=>{const t=document.getElementById("provincia")?.value||"CABA";window.app?.calculatorController?.calculationService&&window.app.calculatorController.calculationService.actualizarValorIntermedio(e,parseFloat(this.value),t),requestAnimationFrame(()=>{window.app?.calculatorController&&window.app.calculatorController.calcularTodo(),requestAnimationFrame(()=>{this.classList.remove("updating")})})};window.requestIdleCallback?requestIdleCallback(t,{timeout:50}):setTimeout(t,0)},200)}),t.addEventListener("blur",function(){const e=parseFloat(this.value)||0;this.value=e<0?0:e>10?10:e.toFixed(2),this.classList.add("confirmed"),setTimeout(()=>{this.classList.remove("confirmed")},1e3)}),t.addEventListener("focus",function(){this.closest(".gasto-item")?.classList.add("focused")}),t.addEventListener("blur",function(){this.closest(".gasto-item")?.classList.remove("focused")})}},10*t)})}function configurarFAQ(){document.querySelectorAll(".faq-answer").forEach(e=>{e.style.display="none"});document.querySelectorAll(".faq-toggle").forEach(e=>{e.addEventListener("click",function(){const e=this.closest(".faq-item"),t=e.querySelector(".faq-answer");"block"===t.style.display?(t.style.display="none",this.textContent="+",e.classList.remove("active")):(t.style.display="block",this.textContent="‚àí",e.classList.add("active"))})})}function configurarChecklist(){console.log("Checklist configurado")}function toggleFAQ(e){const t=e.closest(".faq-item"),o=t.querySelector(".faq-answer"),a=e.querySelector(".faq-toggle");"block"===o.style.display?(o.style.display="none",a.textContent="+",t.classList.remove("active")):(o.style.display="block",a.textContent="‚àí",t.classList.add("active"))}function mostrarTipsDinamicos(e){const t=document.getElementById("tipsDinamicos");if(!t)return;t.innerHTML="";const o=parseFloat(document.getElementById("valorPropiedad")?.value)||0,a=parseFloat(document.getElementById("montoPrestamo")?.value)||0,i=document.getElementById("provincia")?.value||"CABA";o&&a&&generarTipsBasadosEnDatos(o,a,i,e)}function generarTipsBasadosEnDatos(e,t,o,a){const i=document.getElementById("tipsDinamicos");if(i){if(a?.cuotaInicial){const e=a.cuotaInicial/.25;if(e>4e5){const t=document.createElement("div");t.className="tip-card warning",t.innerHTML=`\n                <span class="tip-icon">‚ö†Ô∏è</span>\n                <div class="tip-content">\n                    <strong>Cuota alta detectada</strong>\n                    <p>Para esta cuota necesit√°s ingresos de al menos ${new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(e)} por mes. Consider√° ajustar el monto o plazo del cr√©dito.</p>\n                </div>\n            `,i.appendChild(t)}}if(window.app?.calculatorController?.exchangeRateService){const e=window.app.calculatorController.exchangeRateService.calcularBandasCambiarias(),t=((e.techo-e.piso)/window.app.calculatorController.exchangeRateService.getTipoCambioOficial()*100).toFixed(1);if(t>30){const e=document.createElement("div");e.className="tip-card danger",e.innerHTML=`\n                <span class="tip-icon">üö®</span>\n                <div class="tip-content">\n                    <strong>Alto riesgo cambiario</strong>\n                    <p>La banda cambiaria tiene ${t}% de variaci√≥n. Planific√° con el escenario m√°s desfavorable.</p>\n                </div>\n            `,i.appendChild(e)}}if(window.app?.calculatorController?.calculationService){const e=window.app.calculatorController.calculationService.getGastosConfig(o);if(e){const t=(e.escritura.intermedio+e.inmobiliaria.intermedio).toFixed(1);if(parseFloat(t)>5){const e=document.createElement("div");e.className="tip-card info",e.innerHTML=`\n                    <span class="tip-icon">üí°</span>\n                    <div class="tip-content">\n                        <strong>Gastos altos en ${o}</strong>\n                        <p>Los gastos de escritura e inmobiliaria representan ${t}% del valor de la casa. Consider√° esto en tu presupuesto.</p>\n                    </div>\n                `,i.appendChild(e)}}}}}function actualizarChecklist(e,t){if(!e||!t)return;[{id:"check1",condition:()=>t.primeraCuota/.25<=1e6},{id:"check2",condition:()=>e.valorPropiedad>0&&e.montoPrestamo>0},{id:"check3",condition:()=>!0},{id:"check4",condition:()=>6*t.primeraCuota>0},{id:"check5",condition:()=>!0}].forEach(e=>{const t=document.getElementById(e.id);if(t){const o=e.condition();t.checked=o;const a=t.closest(".checklist-item");a&&(a.classList.toggle("completed",o),o?(a.style.borderLeftColor="#22c55e",a.style.background="rgba(34, 197, 94, 0.1)"):(a.style.borderLeftColor="#22c55e",a.style.background="rgba(15, 23, 42, 0.6)"))}})}document.addEventListener("DOMContentLoaded",function(){console.log("üöÄ Iniciando aplicaci√≥n de calculadora hipotecaria...");(()=>{try{const e=new CalculatorController,t=new SimulatorController(e.exchangeRateService,e.calculationService,e.utilityService);window.app={calculatorController:e,simulatorController:t};const o=()=>{configurarSlidersGastos(),setTimeout(()=>configurarFAQ(),50),setTimeout(()=>configurarChecklist(),100),console.log("‚úÖ Aplicaci√≥n inicializada correctamente")};window.requestIdleCallback?requestIdleCallback(o,{timeout:500}):setTimeout(o,100)}catch(e){console.error("‚ùå Error al inicializar la aplicaci√≥n:",e)}})()}),window.toggleFAQ=toggleFAQ,window.mostrarTipsDinamicos=mostrarTipsDinamicos,window.actualizarChecklist=actualizarChecklist;