class ValidationService{constructor(){this.states=new Map}validateField(e){const a=parseFloat(e.value)||0,s=e.id;this.clearFieldState(e);let l={isValid:!0,level:"valid",message:""};switch(s){case"valorPropiedad":a<=0?l={isValid:!1,level:"error",message:"Valor requerido"}:a>3e5?l={isValid:!0,level:"warning",message:"Valor muy alto"}:a<1e4&&(l={isValid:!0,level:"info",message:"Valor bajo para una propiedad"});break;case"montoPrestamo":a<=0?l={isValid:!1,level:"error",message:"Monto requerido"}:a>1e9&&(l={isValid:!0,level:"warning",message:"Monto muy alto"});break;case"tasaInteres":a<=0?l={isValid:!1,level:"error",message:"Tasa requerida"}:(a<4.5||a>11)&&(l={isValid:!0,level:"warning",message:"Fuera del rango típico (4.5% - 11%)"});break;case"plazo":a<=0?l={isValid:!1,level:"error",message:"Plazo requerido"}:(a<5||a>35)&&(l={isValid:!0,level:"warning",message:"Fuera del rango típico (5-35 años)"})}return this.applyFieldState(e,l),this.states.set(s,l),setTimeout(()=>this.updateGlobalStatus(),100),l}applyFieldState(e,a){const s=e.closest(".form-group");s&&(s.classList.remove("field-valid","field-warning","field-error","field-info"),"valid"!==a.level&&s.classList.add(`field-${a.level}`),this.updateFieldMessage(s,a))}updateFieldMessage(e,a){let s=e.querySelector(".field-message");"valid"!==a.level&&a.message?(s||(s=document.createElement("small"),s.className="field-message",e.appendChild(s)),s.textContent=a.message,s.className=`field-message field-message-${a.level}`):s&&s.remove()}clearFieldState(e){const a=e.closest(".form-group");if(a){a.classList.remove("field-valid","field-warning","field-error","field-info");const e=a.querySelector(".field-message");e&&e.remove()}}getOverallValidation(){let e=!1,a=!1;for(const[s,l]of this.states)"error"===l.level?e=!0:"warning"===l.level&&(a=!0);return e?"error":a?"warning":"valid"}updateGlobalStatus(){const e=document.getElementById("validation-status"),a=e?.querySelector(".status-text");if(!e||!a)return;const s=this.getOverallValidation();let l="hidden",r="";"error"===s?(l="warning",r="Revisá los valores ingresados"):"warning"===s?(l="warning",r="Datos listos, revisá las recomendaciones"):"valid"===s?(l="ready",r="Todos los datos están completos"):l="hidden",e.className=`validation-status ${l}`,a.textContent=r}validarDatosParaConsejos(e){const a=[],s=1301*e.valorPropiedad,l=e.montoPrestamo;return l>s&&a.push({tipo:"warning",mensaje:"El préstamo es mayor al valor de la propiedad"}),l>.9*s&&a.push({tipo:"info",mensaje:"Considerá reservar al menos 10% extra para gastos"}),a}validarDatosParaCalculos(e){const a=e.valorPropiedad>0,s=e.montoPrestamo>0,l=e.tasaInteres>0,r=e.plazo>0;return a&&s&&l&&r}clearAllStates(){this.states.clear();document.querySelectorAll(".form-group").forEach(e=>{e.classList.remove("field-valid","field-warning","field-error","field-info");const a=e.querySelector(".field-message");a&&a.remove()})}}"undefined"!=typeof module&&module.exports?module.exports=ValidationService:window.ValidationService=ValidationService;